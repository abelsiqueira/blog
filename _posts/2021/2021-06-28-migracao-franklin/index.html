<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/blog/libs/highlight/github.min.css"> <link href="/blog/css/bootstrap.min.css" rel=stylesheet  crossorigin=anonymous > <link rel=icon  href="/blog/images/logo.png"> <link rel=stylesheet  href="/blog/css/code-katex.css"> <link rel=stylesheet  href="/blog/css/custom.css"> <link rel=stylesheet  href="/blog/css/dark-mode.css"> <link rel=preconnect  href="https://fonts.gstatic.com"> <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Montserrat&display=swap" rel=stylesheet > <title>Migração do site para Franklin.jl</title> <meta property="og:title" content="Abel Soares Siqueira"> <meta name="twitter:title" content="Abel Soares Siqueira"> <meta property="og:description" content="Migração do site para Franklin.jl"> <meta name="twitter:description" content="Migração do site para Franklin.jl"> <meta property="og:image" content="https://abelsiqueira.github.io/images/abel-banner.jpg"> <meta name="twitter:image" content="https://abelsiqueira.github.io/images/abel-banner.jpg"> <meta property="og:url" content=abelsiqueira.github.io > <meta name="twitter:card" content=summary_large_image > <header> <nav class="navbar navbar-expand-lg"> <div class=container-fluid > <a class="navbar-brand text-end" href="/blog/"></a> <button class=navbar-toggler  type=button  data-bs-toggle=collapse  data-bs-target="#navbarSupportedContent" aria-controls=navbarSupportedContent  aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> <div class="collapse navbar-collapse" id=navbarSupportedContent > <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> <li class=nav-item ><a class=nav-link  href="/blog/">Home</a> <li class=nav-item ><a class=nav-link  href="/blog/blog/">Blog</a> <li class=nav-item ><a class=nav-link  href="/blog/julia/">Julia</a> <li class=nav-item ><a class=nav-link  href="/blog/research/">Research</a> <li class=nav-item ><a class=nav-link  href="/blog/ufpr/">UFPR</a> </ul> <div class="dark-switch form-check form-switch"> <input type=checkbox  class=form-check-input  id=darkSwitch  /> <label class=custom-control-label  for=darkSwitch >Dark Mode</label> </div> <script src="/blog/libs/dark-mode-switch.min.js"></script> </div> </div> </nav> </header> <div class=container-fluid > <div class="container main-text"> <div class=franklin-content ><h1 id="migração_do_site_para_franklinjl"><a href="#migração_do_site_para_franklinjl" class=header-anchor >Migração do site para Franklin.jl</a></h1> <p>Há algum tempo o Jekyll tem me dado trabalho. Como não sou usuário de Ruby, volta e meia falta alguma coisa na minha instalação e eu passo horas tentando corrigir o problema pra fazer meu site rodar localmente. Para o CiDAMO, eu considerei o Hugo, já que tem mais suporte e eu não seria a única pessoa a cuidar do site. Já para meu site pessoal, e o site do <a href="https://juliasmoothoptimizers.github.io">Julia Smooth Optimizers</a>, resolvi usar Franklin, já que eu quero mais é usar Julia mesmo.</p> <h2 id=vantagens ><a href="#vantagens" class=header-anchor >Vantagens</a></h2> <p><strong>Franklin.jl é Julia,</strong> então eu tenho mais facilidade em manter e até mesmo de contribuir. O site é um repositório Julia, então tudo está dentro do esperado.</p> <p><strong>Franklin.jl roda Julia,</strong> isto é, dá pra usar Julia pra gerar conteúdo <strong>E</strong> pra fazer tutoriais. Por exemplo, a lista de posts na página principal do blog é gerada por um script em Julia que lê os diretórios e imprime o markdown para a página. Por outro lado, os tutoriais do JSO e minhas notas de Cálculo Numérico rodam o código mostrado e a saída é mostrada, então o código está sempre atualizado &#40;ou visivelmente quebrado&#41;.</p> <p><strong><em>Builda</em> no GitHub actions.</strong> Então, eu consigo hostear no próprio github. É como GHA é o padrão do Julia, é fácil de achar suporte.</p> <h2 id=desvantagens ><a href="#desvantagens" class=header-anchor >Desvantagens</a></h2> <p><strong>Pode ficar lento,</strong> já que tem que compilar e rodar o código. Por exemplo, as notas de cálculo numérico levam 40 minutos para rodar, porque tem dezenas de imagens e algumas animações. Eu tive que fazer uma gambiarra para separar as notas do site. Falo mais sobre isso <a href="#gambiarra">aqui</a>.</p> <p><strong>Não é óbvio como manter layouts diferentes.</strong> Por exemplo, se eu quiser ter um layout de <code>blog</code> separado de um layout de <code>page</code>, não parece óbvio como. Eu posso colocar <code>if</code>s pra separar conteúdo, mas não é tão natural.</p> <p><strong>Ainda não está muito estável.</strong> Naturalmente, já que é bem novo, mas dá pra sentir quando se precisa achar alguma coisa específica.</p> <h2 id=gambiarra ><a href="#gambiarra" class=header-anchor >Gambiarra</a></h2> <p>Meu site tem 3 partes:</p> <ul> <li><p>a base, que consiste principalmente de material estático que eu pretendo atualizar de vez em quando &#40;novos pacotes, pesquisa, orientações, cargos, etc.&#41;;</p> <li><p>as notas de cálculo numérico, que depois de pronto deve ver pouca atualização, mas que leva 40 minutos pra compilar no GitHub Actions.</p> <li><p>o blog, que idealmente vê atualizações frequentes, e por isso vou fingir que terá atualizações frequentes.</p> </ul> <p>Se eu coloco todos juntos, então qualquer mudança na base ou no blog leva 40 minutos pra compilar no GitHub Actions por causa das notas de cálculo numérico.</p> <p>Por outro lado, se eu separo todas, mudanças no CSS, layout, javascript, etc., não são atualizadas.</p> <p>A solução, simples, é de só manter os arquivos de CSS, layout, javascript, etc., na base e copiá-los no build do GitHub Actions para os outros repositórios. Além disso, adiciono essas pastas no <code>.gitignore</code>, e localmente é só copiá-las para os repositórios que precisam dela. Aqui a adição ao GitHub actions:</p> <pre><code class="julia hljs">- name: Clone abelsiqueira.github.io
  run: |
    wget https://github.com/abelsiqueira/abelsiqueira.github.io/archive/refs/heads/main.zip
    unzip main.zip
    mv abelsiqueira.github.io-main/_layout .
    mv abelsiqueira.github.io-main/_css .
    mv abelsiqueira.github.io-main/_libs .
    rm -rf abelsiqueira.github.io-main main.zip</code></pre> <h2 id="conclusão"><a href="#conclusão" class=header-anchor >Conclusão</a></h2> <p>No fim das contas, sair do Jekyll para o Franklin vai ser uma experiência interessante. Devo fazer alguns posts atualizados usando as novas capacidades do Franklin, e aí veremos se valeu a pena ou não. Também queria ter usado a oportunidade para aprender o Hugo, mas uma coisa de cada vez.</p> </div> </div> </div> </div> <footer> <div class="container text-center social-footer"> <a href="mailto:abel.s.siqueira@gmail.com"> <i class="fas fa-2x fa-envelope" aria-hidden=true ></i> </a><a href="https://github.com/abelsiqueira"> <i class="fab fa-2x fa-github-square" aria-hidden=true ></i> </a><a href="https://linkedin.com/in/abel-siqueira/"> <i class="fab fa-2x fa-linkedin" aria-hidden=true ></i> </a><a href="https://twitter.com/abel_siqueira"> <i class="fab fa-2x fa-twitter-square" aria-hidden=true ></i> </a><a href="https://www.researchgate.net/profile/Abel_Siqueira"> <i class="fab fa-2x fa-researchgate" aria-hidden=true ></i> </a><a href="http://orcid.org/0000-0003-4451-281X"> <i class="fab fa-2x fa-orcid" aria-hidden=true ></i> </a> </div> </footer> <script src="/blog/libs/bootstrap.bundle.min.js" crossorigin=anonymous ></script> <script src="https://kit.fontawesome.com/d17d5e5245.js" crossorigin=anonymous ></script> <script type="text/javascript" src="https://cdn.rawgit.com/pcooksey/bibtex-js/ef59e62c/src/bibtex_js.js"></script>